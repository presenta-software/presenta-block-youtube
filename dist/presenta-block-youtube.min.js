!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).PresentaBlockYoutube=t()}(this,(function(){"use strict";var e="style_youtube__1KEl0",t="style_blockmouse__3K3Xl",o="style_playing__2SoSR";!function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".style_youtube__1KEl0{display:flex;position:relative}.style_youtube__1KEl0,.style_youtube__1KEl0 iframe{width:100%;height:100%}.style_youtube__1KEl0 img{-o-object-fit:cover;object-fit:cover}.style_blockmouse__3K3Xl,.style_youtube__1KEl0 img{position:absolute;top:0;left:0;width:100%;height:100%}.style_playing__2SoSR img{display:none}");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports}((function(e,t){e.exports=function(e,t){if(null==t&&(t={fuzzy:!0}),/youtu\.?be/.test(e)){var o,n=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(o=0;o<n.length;++o)if(n[o].test(e))return n[o].exec(e)[1];if(t.fuzzy){var i=e.split(/[\/\&\?=#\.\s]/g);for(o=0;o<i.length;++o)if(/^[^#\&\?]{11}$/.test(i[o]))return i[o]}}return null}}));let i=!1;const r=[],l=function(n,l){l._mode;const s="present"===l._mode,d="print"===l._mode,u=l.key||" ",a=document.createElement("div");a.classList.add(e);var p,y="presenta-player-"+Math.random();a.innerHTML=`\n    <div id="${y}"></div>\n    <img src="${l.thumb}" />\n    <div class="${t}"></div>\n  `,n.appendChild(a),(()=>{if(!document.querySelector("#presenta-youtube-iframe-api-script")){var e=document.createElement("script");e.id="presenta-youtube-iframe-api-script",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{i=!0,r.forEach((e=>e()))}}})();let c=!1;const f=()=>{setTimeout((()=>{p=new YT.Player(y,{height:"100%",width:"100%",videoId:l.ytid,autoplay:l.autoplay?1:0,loop:l.loop,controls:l.controls?1:0,modestbranding:1,events:{onReady:e=>{l.preload?(p.playVideo(),p.pauseVideo()):m()},onStateChange:e=>console.log("change",e)}})}))};this.beforeDestroy=()=>{l._rootElement.removeEventListener("keyup",b),n.removeEventListener("click",h)},this.stepForward=e=>{};const m=()=>{p.playVideo(),a.classList.add(o),c=!0},h=()=>{p?c?(p.pauseVideo(),c=!1):m():i?f():r.push(f)},b=e=>{e.key===u&&(h(),e.stopPropagation(),e.preventDefault())};s&&(l._rootElement.addEventListener("keyup",b),n.addEventListener("click",h)),(l.autoplay||l.preload)&&s&&h(),d&&h()};return l.install=e=>{e.addBlock("youtube",l),e.io.addPreload&&e.io.addPreload({type:"youtube",field:"thumb",as:"image"})},l.run=e=>{e.scenes.forEach((e=>{e.blocks.forEach((e=>{"youtube"===e.type&&(e.ytid=11===e.url.length?e.url:n(e.url),e.thumb=`https://i.ytimg.com/vi/${e.ytid}/hqdefault.jpg`)}))}))},"undefined"!=typeof window&&window.Presenta&&window.Presenta.use(l),l}));
