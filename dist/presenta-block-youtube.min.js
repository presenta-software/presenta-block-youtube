!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).PresentaBlockYoutube=t()}(this,(function(){"use strict";var e="style_youtube__1KEl0",t="style_blockmouse__3K3Xl",o="style_playing__2SoSR";!function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".style_youtube__1KEl0{display:flex;position:relative}.style_youtube__1KEl0,.style_youtube__1KEl0 iframe{width:100%;height:100%}.style_youtube__1KEl0 img{-o-object-fit:cover;object-fit:cover}.style_blockmouse__3K3Xl,.style_youtube__1KEl0 img{position:absolute;top:0;left:0;width:100%;height:100%}.style_playing__2SoSR img{display:none}");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports}((function(e,t){e.exports=function(e,t){if(null==t&&(t={fuzzy:!0}),/youtu\.?be/.test(e)){var o,n=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(o=0;o<n.length;++o)if(n[o].test(e))return n[o].exec(e)[1];if(t.fuzzy){var i=e.split(/[\/\&\?=#\.\s]/g);for(o=0;o<i.length;++o)if(/^[^#\&\?]{11}$/.test(i[o]))return i[o]}}return null}}));const i=function(i,r,l,s){s.mode;const u="present"===s.mode,a=document.createElement("div");a.classList.add(e);var d="presenta-player-"+Math.random();const p=11===r.url.length?r.url:n(r.url),y=`https://i.ytimg.com/vi/${p}/hqdefault.jpg`;var c;a.innerHTML=`\n    <div id="${d}"></div>\n    <img src="${y}" />\n    <div class="${t}"></div>\n  `,i.appendChild(a),(()=>{if(!document.querySelector("#presenta-youtube-iframe-api-script")){var e=document.createElement("script");e.id="presenta-youtube-iframe-api-script",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{}}})();let f=!1;this.beforeDestroy=()=>{l.removeEventListener("keyup",_)},this.stepForward=e=>{};const m=()=>{c.playVideo(),a.classList.add(o),f=!0},h=()=>{c?f?(c.pauseVideo(),f=!1):m():setTimeout((()=>{c=new YT.Player(d,{height:"100%",width:"100%",videoId:p,autoplay:r.autoplay?1:0,loop:r.loop,controls:r.controls?1:0,modestbranding:1,events:{onReady:e=>{r.preload?(c.playVideo(),c.pauseVideo()):m()},onStateChange:e=>console.log("change",e)}})}))},_=e=>{" "===e.key&&(h(),e.stopPropagation(),e.preventDefault())};u&&l.addEventListener("keyup",_),(r.autoplay||r.preload)&&u&&h()};return i.install=e=>{e.addBlock("youtube",i)},"undefined"!=typeof window&&window.Presenta&&window.Presenta.use(i),i}));
